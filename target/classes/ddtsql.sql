CREATE TABLE `ddt` (
  `ID` BIGINT(64) NOT NULL AUTO_INCREMENT COMMENT '主键ID',
  `NAME` VARCHAR(64) DEFAULT NULL COMMENT '名称',
  `IMAGEURL` VARCHAR(64) NOT NULL COMMENT 'imageUrl',
  `CREATE_TIME` VARCHAR(25) DEFAULT NULL COMMENT '创建时间',
  `CREATE_BY` VARCHAR(50) DEFAULT NULL COMMENT '创建人',
  `UPDATE_TIME` VARCHAR(25) DEFAULT NULL COMMENT '修改时间',
  `UPDATE_BY` VARCHAR(50) DEFAULT NULL COMMENT '修改人',
  PRIMARY KEY (`ID`)
) ENGINE=INNODB AUTO_INCREMENT=60 DEFAULT CHARSET=utf8mb4 COMMENT='DDT'




DELETE FROM ddt WHERE ID = 61



CREATE TABLE `ddt_user` (
  `USER_ID` BIGINT(64) NOT NULL AUTO_INCREMENT COMMENT '主键ID',
  `USER_NAME` VARCHAR(64) DEFAULT NULL COMMENT '用户名称',
  `PASSWORD` VARCHAR(50) CHARACTER SET utf8 DEFAULT NULL COMMENT '密码',
  `ROLE` TINYINT(4) DEFAULT NULL COMMENT '用户类型（1.管理员2.普通用户）',
  `CREATE_TIME` VARCHAR(25) DEFAULT NULL COMMENT '创建时间',
  `CREATE_BY` VARCHAR(50) DEFAULT NULL COMMENT '创建人',
  `UPDATE_TIME` VARCHAR(25) DEFAULT NULL COMMENT '修改时间',
  `UPDATE_BY` VARCHAR(50) DEFAULT NULL COMMENT '修改人',
  PRIMARY KEY (`USER_ID`)
) ENGINE=INNODB AUTO_INCREMENT=60 DEFAULT CHARSET=utf8mb4 COMMENT='ddt_user'


CREATE TABLE `ddt_permission` (
  `DDT_PERMISSION_ID` BIGINT(64) NOT NULL AUTO_INCREMENT COMMENT '主键ID',
  `PERMISSION_NAME` VARCHAR(50) CHARACTER SET utf8 NOT NULL COMMENT '权限名称',
  `PARENT_ID` BIGINT(64) NOT NULL COMMENT '父级ID',
  `PERMISSION_CODE` VARCHAR(50) CHARACTER SET utf8 NOT NULL COMMENT '菜单编码',
  `HREF` VARCHAR(100) CHARACTER SET utf8 DEFAULT NULL COMMENT '菜单路径',
  `DESCRIPTION` VARCHAR(200) CHARACTER SET utf8 DEFAULT NULL COMMENT '菜单描述',
  `SORT` INT(10) DEFAULT NULL COMMENT '排序',
  `TYPE` TINYINT(4) DEFAULT NULL COMMENT '类型 1.跳转 2.下拉展示',
  `LEVEL` TINYINT(4) DEFAULT NULL COMMENT '级别',
  `CREATE_TIME` VARCHAR(25) DEFAULT NULL COMMENT '创建时间',
  `CREATE_BY` VARCHAR(50) CHARACTER SET utf8 DEFAULT NULL COMMENT '创建人',
  `UPDATE_TIME` VARCHAR(25) DEFAULT NULL COMMENT '修改时间',
  `UPDATE_BY` VARCHAR(50) CHARACTER SET utf8 DEFAULT NULL COMMENT '修改人',
  PRIMARY KEY (`DDT_PERMISSION_ID`)
) ENGINE=INNODB AUTO_INCREMENT=360 DEFAULT CHARSET=utf8mb4 COMMENT='ddt权限表'




CREATE TABLE `ddt_group` (
  `DDT_GROUP_ID` BIGINT(64) NOT NULL AUTO_INCREMENT COMMENT '主键ID',
  `GROUP_NAME` VARCHAR(50) CHARACTER SET utf8 NOT NULL COMMENT '组名称',
  `DESCRIPTION` VARCHAR(100) CHARACTER SET utf8 DEFAULT NULL COMMENT '组描述',
  `CREATE_TIME` VARCHAR(25) DEFAULT NULL COMMENT '创建时间',
  `CREATE_BY` VARCHAR(50) CHARACTER SET utf8 DEFAULT NULL COMMENT '创建人',
  `UPDATE_TIME` VARCHAR(25) DEFAULT NULL COMMENT '修改时间',
  `UPDATE_BY` VARCHAR(50) CHARACTER SET utf8 DEFAULT NULL COMMENT '修改人',
  PRIMARY KEY (`DDT_GROUP_ID`)
) ENGINE=INNODB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8mb4 COMMENT='分组表'



CREATE TABLE `ddt_user_group_relation` (
  `DDT_USER_GROUP_RELATION_ID` BIGINT(64) NOT NULL AUTO_INCREMENT COMMENT '主键ID',
  `DDT_GROUP_ID` BIGINT(64) NOT NULL COMMENT '权限ID',
  `DDT_USER_ID` BIGINT(64) NOT NULL COMMENT '用户ID',
  PRIMARY KEY (`DDT_USER_GROUP_RELATION_ID`)
) ENGINE=INNODB AUTO_INCREMENT=515 DEFAULT CHARSET=utf8mb4 COMMENT='ddt用户分组关系表'


CREATE TABLE `ddt_group_permission_relation` (
  `DDT_GROUP_PERMISSION_RELATION_ID` BIGINT(64) NOT NULL AUTO_INCREMENT COMMENT '主键ID',
  `DDT_GROUP_ID` BIGINT(64) NOT NULL COMMENT '权限ID',
  `DDT_PERMISSION_ID` BIGINT(64) NOT NULL COMMENT '用户ID',
  PRIMARY KEY (`DDT_GROUP_PERMISSION_RELATION_ID`)
) ENGINE=INNODB AUTO_INCREMENT=515 DEFAULT CHARSET=utf8mb4 COMMENT='ddt用户分组关系表'




/****************************  用户权限   ************************************/
SELECT `ddt_permission`.`DDT_PERMISSION_ID`,`ddt_permission`.`PERMISSION_NAME`,`ddt_permission`.`HREF`,`ddt_permission`.`LEVEL`,`ddt_permission`.`PARENT_ID`
 FROM `ddt_user` 
LEFT JOIN `ddt_user_group_relation` ON `ddt_user`.`USER_ID` = `ddt_user_group_relation`.`DDT_USER_ID`
LEFT JOIN `ddt_group` ON `ddt_user_group_relation`.`DDT_GROUP_ID` = `ddt_group`.`DDT_GROUP_ID`
LEFT JOIN `ddt_group_permission_relation` ON `ddt_group_permission_relation`.`DDT_GROUP_ID` = `ddt_group`.`DDT_GROUP_ID`
LEFT JOIN `ddt_permission` ON `ddt_permission`.`DDT_PERMISSION_ID` = `ddt_group_permission_relation`.`DDT_PERMISSION_ID`
WHERE `ddt_user`.`USER_ID` = 61
